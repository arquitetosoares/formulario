<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Pré-Briefing de Interiores</title>
  <meta name="description" content="Formulário rápido para dar os primeiros passos no seu projeto de interiores.">

  <!-- Fonte -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  
  <style>
        body {
            font-family: 'Barlow', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100svh;
            margin: 0;
            background-color: #1C3F5D;
            color: #e0e0e0;
            overflow: auto;
            position: relative;
        }

        .background-image {
            position: fixed;
            top: 50%;
            width: 17%;
            transform: translateY(-50%);
            z-index: -1;
        }

        .background-left { left: 0; }
        .background-right { right: 0; }

        .container {
            max-width: 700px;
            width: 100%;
            max-height: 50vh;
            padding: 20px 100px 40px 100px;
            border: none;
            border-radius: 0px;
            text-align: left;
            background-color: #1C3F5D;
            color: #e0e0e0;
            display: none;
            z-index: 1;
            overflow-y: auto;
        }

        .container.visible { display: block; }

        h2 {
            font-weight: 700;
            margin: 0px 0px 40px 0px;
            text-align: center;
            color: #e0e0e0;
        }

        p, label {
            font-weight: 400;
            color: #e9e9e9;
            display: block;
        }

        form#form-stage4 > div { margin: 10px 0 30px 0; }
        form#form-stage4 > div > label { line-height: 1.5; }
        form#form-stage3 > div { margin-top: 30px; margin-bottom: 30px; }
        form#form-stage5 > div { margin-top: 10px; }
		form#form-stage5b > button { margin-top: 40px; }
        form#form-stage5 > div > label { line-height: 1.5; }
        form#form-stage2 > div { margin-bottom: 30px; }
        form#form-stage2 > div > label { padding-top: 5px; font-weight: 400; }
        form > button { margin-top: 20px; }
		form > label {
			margin-bottom: 15px;
		}

        label { font-weight: 500; font-size: 19px; }
        .subtext { font-weight: 100; font-style: italic; margin: 0 0 8px 0; color: #a0a0a0; }
		
		.option-group > .inline-option {
			padding-top: 5px;
			font-weight: 400;
		}

		#box7 > button {
			margin-top: 30px;
		}
		
		#box7 p {
			margin: 6px 0;
		}

        input[type="text"], input[type="email"], textarea {
            width: 100%;
            padding: 8px;
            border: none;
            border-bottom: 1px solid #172e43;
            border-radius: 0px;
            font-weight: 400;
            margin: 10px 0 20px 0;
            background-color: #16324A;
            color: #e0e0e0;
        }
        input[type="text"]:focus, input[type="email"]:focus, textarea:focus { outline: none; border-bottom: 1px solid #e0e0e0; }

		input::placeholder,
		textarea::placeholder {
		  color: #ffffff;
		  opacity: 0.3; /* deixa levemente translúcido */
		}
		
        .option-group { display: grid; gap: 8px; }
        .inline-option { display: inline-flex; align-items: center; gap: 5px; margin-right: 12px; font-size: 17px;}

        button {
            padding: 10px 30px;
            width: auto;
            border: 1px solid #172e43;
            background-color: #16324A;
            color: #e0e0e0;
            font-size: 18px;
            cursor: pointer;
            border-radius: 30px;
            font-weight: 500;
            display: block;
            margin: 0 auto;
        }
        button:hover { background-color: #112334; }

        .bottom-image {
            position: fixed;
            bottom: 4%;
            width: 260px;
            filter: brightness(0) invert(1);
        }

        div#welcome-screen > h2 { font-size: 35px; font-weight: 600;}
        div#box6 > h2 { font-size: 35px; }
        div#box6 > p { margin: 0; }
        a { color: #1e90ff; }
        a:hover { color: #63a4ff; }
        div#box6 > p > a { color: #333; }		
        div#box6 > button { margin-top: 30px; }

        #welcome-screen > h2 > i { font-weight: 200; }
        #welcome-screen > button { margin-top: 40px; }
        #welcome-screen p, #form-stage6 p {
			line-height: 1.5;
			letter-spacing: 0.5px;
			font-size: 18px;
			text-align: center;
		}

        .logo-link a { display: flex; justify-content: center; }

        :root { --vh: 100%; }
        body { height: calc(var(--vh, 1vh) * 100); }
			
        @media (max-width: 768px) {
            body { padding: 0 16px; }
            .container { padding: 16px; }
            .container {
                max-width: 70%;
                padding: 0px 20px;
                background-color: unset;
                box-shadow: none;
                margin-top: 0;
            }
            input[type="text"], input[type="email"], textarea { background-color: #121212; }
            .background-image { width: 200px; opacity: 0; }
            .bottom-image { width: 150px; bottom: 5%; }
            h2 { font-size: 24px; margin-bottom: 30px; }
            div#welcome-screen > h2 { font-size: 30px; }
            p, label { font-size: 14px; }
            button { padding: 10px 20px; font-size: 14px; margin-top: 30px; }
            .nav-button { width: 30px; height: 30px; bottom: 10px; opacity: 0.8; border-radius: 0px; }
            .up-button { right: 50px; }
            .down-button { right: 10px; }
        }
		
		/* Firefox */
		.container {
		  /* deixa mais fina e define cores (thumb / trilha) */
		  scrollbar-width: thin;
		  scrollbar-color: #ffffff3b #1c3f5d; /* thumb / track */
		}

		/* Chromium/WebKit (Chrome, Edge, Opera, Safari desktop) */
		.container::-webkit-scrollbar {
		  width: 12px;
		}

		.container::-webkit-scrollbar-track {
		  background: #0f2740; /* cor da trilha */
		}

		.container::-webkit-scrollbar-thumb {
		  background-color: #2e8fff; /* cor do thumb */
		  border-radius: 20px;
		  border: 3px solid #0f2740; /* cria “respiro” */
		}

		/* (Opcional) só quando visível */
		.container.visible::-webkit-scrollbar-thumb {
		  /* se quiser variar quando a etapa está ativa */
		}

		/* GRID de estilos (2 colunas no desktop, 1 no mobile) */
		.style-grid {
		  display: grid;
		  grid-template-columns: repeat(2, minmax(0, 1fr));
		  gap: 16px;
		  margin-top: 10px;
		}

		/* Card do estilo */
		.style-card {
		  position: relative;
		  border: 1px solid #1f3a54;
		  border-radius: 12px;
		  overflow: hidden;
		  background: #0f2740; /* tom do seu tema */
		  transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
		}

		/* torna toda a área clicável */
		.style-card input {
		  position: absolute;
		  inset: 0;
		  opacity: 0;
		  cursor: pointer;
		}

		/* conteúdo visual do card */
		.style-card .content {
		  display: flex;
		  flex-direction: column;
		}

		.style-card .title {
		  font-weight: 600;
		  padding: 12px 14px 8px 14px;
		  color: #e0e0e0;
		}

		.style-card img {
		  width: 100%;
		  height: 140px;            /* não gigante */
		  object-fit: cover;
		  display: block;
		  filter: brightness(0.9);
		}

		/* feedback ao passar o mouse */
		.style-card:hover {
		  transform: translateY(-1px);
		  border-color: #2e8fff;
		  box-shadow: 0 0 0 2px rgba(46,143,255,0.15) inset;
		}

		/* estado selecionado */
		.style-card input:checked ~ .content,
		.style-card:has(input:checked) {
		  border-color: #ffffff;
		  box-shadow: 0 0 0 2px rgba(46,143,255,0.35) inset;
		}

		/* mobile: 1 coluna */
		@media (max-width: 768px) {
		  .style-grid { grid-template-columns: 1fr; }
		  .style-card img { height: 120px; }
		}

		/* === Cards de estilo: título sobre a imagem === */
		.style-card {
		  position: relative;
		  border: 2px solid #1f3a54;
		  border-radius: 12px;
		  overflow: hidden;
		  background: transparent;      /* tira a “faixa” azul do topo */
		}

		.style-card .content {
		  position: relative;
		}

		.style-card img {
		  width: 100%;
		  height: 160px;                /* altura fixa, ajusta se quiser maior/menor */
		  object-fit: cover;
		  display: block;
		}

		.style-card .content::after {
		  content: "";
		  position: absolute;
		  left: 0; right: 0; bottom: 0;
		  height: 55%;
		  pointer-events: none;
		  background: linear-gradient(
			to top,
			rgba(0,0,0,0.45),
			rgba(0,0,0,0) 70%
		  );
		}

		.style-card .title {
		  position: absolute;
		  left: 12px;
		  right: 12px;
		  bottom: 10px;
		  margin: 0;
		  padding: 4px 6px;
		  font-weight: 700;
		  color: #ffffff;
		  text-shadow: 0 1px 2px rgba(0,0,0,0.35); /* sombra leve */
		  background: transparent;
		}

		.style-card:hover {
		  transform: translateY(-1px);
		  border-color: #2e8fff;
		  box-shadow: 0 0 0 2px rgba(46,143,255,0.15) inset;
		}

		.style-card:has(input:checked) {
		  border-color: #ffffff;
		  box-shadow: 0 0 0 2px rgba(46,143,255,0.35) inset;
		}

		@media (max-width: 768px) {
		  .style-card img { height: 140px; }
		}

		/* Garantir hierarquia de camadas no card */
		.style-card .content { position: relative; }

		.style-card .content::after {
		  content: "";
		  position: absolute;
		  left: 0; right: 0; bottom: 0;
		  height: 55%;
		  background: linear-gradient(to top, rgba(0,0,0,0.45), rgba(0,0,0,0) 70%);
		  z-index: 1;                 /* gradiente abaixo do texto */
		  pointer-events: none;       /* não intercepta clique */
		}

		.style-card .title {
		  position: absolute;
		  left: 12px;
		  right: 12px;
		  bottom: 10px;
		  color: #fff;
		  font-weight: 600;
		  text-shadow: 0 1px 2px rgba(0,0,0,0.35);
		  z-index: 2;                 /* texto acima do gradiente */
		}

		/* === Inputs consistentes no mobile === */
		input[type="text"],
		input[type="email"],
		input[type="tel"],
		textarea,
		select {
		  -webkit-appearance: none;
		  appearance: none;
		  background-color: #0f2740;     /* cor do campo (ajusta à sua paleta) */
		  border: 1px solid #1f3a54;
		  border-radius: 8px;
		  color: #e0e0e0;
		  width: 100%;
		  padding: 12px 14px;
		  line-height: 1.4;
		  box-shadow: none;              /* remove sombras nativas do iOS */
		  outline: none;
		}

		/* foco visível e no teu tema */
		input:focus,
		textarea:focus,
		select:focus {
		  border-color: #2e8fff;
		  box-shadow: 0 0 0 2px rgba(46,143,255,0.25);
		}

		/* placeholder legível no fundo escuro */
		input::placeholder,
		textarea::placeholder {
		  color: #b3c2d6;
		  opacity: 1;
		}

		/* remove highlight azul no toque (Android) */
		* {
		  -webkit-tap-highlight-color: transparent;
		}

		/* iOS Safari / Chrome autofill (campo preenchido automatico) */
		input:-webkit-autofill,
		input:-webkit-autofill:focus {
		  -webkit-text-fill-color: #e0e0e0;
		  transition: background-color 9999s ease-out 0s;
		  box-shadow: 0 0 0px 1000px #0f2740 inset; /* pinta o fundo do autofill */
		  border: 1px solid #1f3a54;
		}

		/* Se estiver usando modo escuro global, previne “forçar” tema nos controles */
		:root { color-scheme: light; } /* ou remova se quiser que o SO force dark nos controles */

		/* Aviso do WhatsApp, mais contraste */
		.whats-hint {
		  margin-top: 10px;
		  font-weight: 500;
		  color: #eaf2ff;              /* mais claro que o texto normal */
		}

		.whats-hint a {
		  color: #7fbdff;               /* link com contraste */
		  text-decoration: none;
		  border-bottom: 1px dashed rgba(127,189,255,.6);
		}
		.whats-hint a:hover {
		  color: #a9d2ff;
		  border-bottom-color: rgba(169,210,255,.95);
		}
	
		#box7 {
		  text-align: center;
		}
		
		.contact-info {
		  margin: 25px 0 40px 0;
		  padding: 15px 0;
		  font-size: 15px;
		  line-height: 1.8;
		  text-align: center;
		}
		.contact-info p {
		  margin: 6px 0;
		}
		.contact-info a {
		  color: #7fbdff;
		  text-decoration: none;
		  font-weight: 500;
		}
		.contact-info a:hover {
		  text-decoration: underline;
		  color: #a9d2ff;
		}

		.credit p {
		  margin-top: 25px;
		  font-size: 15px;
		  color: rgba(255,255,255,0.5);
		  text-align: center;
		}
		.credit a {
		  color: rgba(255,255,255,0.7);
		  text-decoration: none;
		}
		.credit a:hover {
		  color: #7fbdff;
		  text-decoration: underline;
		}

  </style>
</head>
<body>

<!-- Imagens de fundo -->
<img src="https://arquitetosoares.github.io/formulario/Esquerda.svg" alt="Decor esquerda" class="background-image background-left">
<img src="https://arquitetosoares.github.io/formulario/Direita.svg" alt="Decor direita" class="background-image background-right">

<!-- Logo inferior -->
<div class="logo-link"><a href="#"><img src="https://arquitetosoares.github.io/formulario/Logo-MS.svg" alt="Logo inferior" class="bottom-image"></a></div>

<!-- Tela inicial -->
<div id="welcome-screen" class="container visible">
  <h2>Olá, seja bem-vindo! <i>Vamos começar?</i></h2>
  <p>Este <b>briefing</b> é o primeiro passo para criarmos um projeto com a sua cara. Suas respostas vão nos ajudar a entender seus desejos, necessidades e estilo, para que juntos possamos construir um espaço único e cheio de significado.</p>
  <button onclick="showNextBox('box1')">Começar</button>
</div>

<!-- 1. Dados básicos -->
<div id="box1" class="container">
  <h2>Pra começar, só algumas informações rápidas sobre você 👋</h2>
  <form id="form-stage1">
    <label>Qual o seu nome?</label>
    <input type="text"  name="user_name"        placeholder="Seu nome" required>

    <label>Pode me passar um e-mail e WhatsApp pra contato?</label>
	<input type="email" name="user_email"       placeholder="email@email.com" required>
	<input type="tel" name="user_phone" placeholder="(DDD) 99999-9999" required="" style="    margin-bottom: 20px;">
    <label>Onde fica o imóvel que vamos trabalhar? (cidade/bairro já ajuda)</label>
    <input type="text"  name="project_address"  placeholder="Cidade / Bairro" required>
    <button type="button" onclick="nextIfValid('form-stage1','box2')">Próxima Etapa</button>

  </form>
</div>

<!-- 2. Sobre o projeto -->
<div id="box2" class="container">
  <h2>Legal! Agora quero entender o motivo dessa transformação ✨</h2>
  <form id="form-stage2">
    <label>Por que você decidiu reformar ou decorar agora?</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="project_reason" value="Quero modernizar" required> Quero modernizar</label>
      <label class="inline-option"><input type="radio" name="project_reason" value="Quero mais funcionalidade"> Quero mais funcionalidade</label>
      <label class="inline-option"><input type="radio" name="project_reason" value="Quero deixar mais bonito"> Quero deixar mais bonito</label>
      <label class="inline-option"><input type="radio" name="project_reason" value="Outro motivo"> Outro motivo</label>
      <input type="text" id="project_reason_other" name="project_reason_other" placeholder="Qual?" style="display:none;">
    </div>

    <label>E quais os ambientes que você sonha transformar primeiro?</label>
    <div class="option-group">
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Sala de Estar"> Sala de Estar</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Sala de Jantar"> Sala de Jantar</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Cozinha"> Cozinha</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Quartos"> Quartos</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Banheiros"> Banheiros</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Área Gourmet / Varanda"> Área Gourmet / Varanda</label>
      <label class="inline-option"><input type="checkbox" name="project_rooms" value="Outros"> Outros</label>
      <input type="text" id="project_rooms_other" name="project_rooms_outros" placeholder="Quais?" style="display:none;">
    </div>

    <label>Se tivesse que escolher UMA coisa que não pode faltar, qual seria?</label>
    <textarea name="must_have"     required></textarea>

    <label>E o que você definitivamente não quer no seu projeto?</label>
    <textarea name="must_not_have" required></textarea>

    <button type="button" onclick="nextIfValid('form-stage2','box3')">Próxima Etapa</button>

  </form>
</div>

<!-- 3. Estilo e inspirações -->
<div id="box3" class="container">
  <h2>Show! Vamos falar de estilo 🎨</h2>
  <form id="form-stage3">
    <label>Olhe essas opções de estilos (vou colocar imagens no formulário depois) e me diga com quais você mais se identifica:</label>
<div class="style-grid">
  <!-- Moderno / Minimalista -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Moderno / Minimalista">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/moderno-minimalista.png" alt="Moderno / Minimalista">
      <div class="title">Moderno / Minimalista</div>
    </div>
  </label>

  <!-- Clássico / Sofisticado -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Clássico / Sofisticado">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/classico-sofisticado.png" alt="Clássico / Sofisticado">
      <div class="title">Clássico / Sofisticado</div>
    </div>
  </label>

  <!-- Industrial / Urbano -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Industrial / Urbano">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/industrial-urbano.png" alt="Industrial / Urbano">
      <div class="title">Industrial / Urbano</div>
    </div>
  </label>

  <!-- Rústico / Aconchegante -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Rústico / Aconchegante">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/rustico-aconchegante.png" alt="Rústico / Aconchegante">
      <div class="title">Rústico / Aconchegante</div>
    </div>
  </label>

  <!-- Escandinavo / Neutro -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Escandinavo / Neutro">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/escandinavo-neutro.png" alt="Escandinavo / Neutro">
      <div class="title">Escandinavo / Neutro</div>
    </div>
  </label>

  <!-- Colorido / Criativo -->
  <label class="style-card">
    <input type="checkbox" name="style" value="Colorido / Criativo">
    <div class="content">
      <img src="https://arquitetosoares.github.io/formulario/colorido-criativo.png" alt="Colorido / Criativo">
      <div class="title">Colorido / Criativo</div>
    </div>
  </label>

<!-- Aqui volta a opção OUTRO como antes -->
<div class="option-group" style="margin-top:5px;">
  <label class="inline-option">
    <input type="checkbox" name="style" value="Outro"> Outro
  </label>
  <input type="text" id="style_other" name="style_outro" placeholder="Qual?" style="display:none; margin-left:10px;">
</div>
</div>

<!-- mantém o seu campo de "Outro" que aparece quando selecionado -->
<input type="text" id="style_other" name="style_outro" placeholder="Qual?" style="display:none; margin-top:10px;">


    <label>Prefere ambientes mais claros e neutros, mais escuros e intimistas, ou coloridos e vibrantes?</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="colors_pref" value="Claros e neutros" required> Claros e neutros</label>
      <label class="inline-option"><input type="radio" name="colors_pref" value="Escuros e intimistas"> Escuros e intimistas</label>
      <label class="inline-option"><input type="radio" name="colors_pref" value="Coloridos e vibrantes"> Coloridos e vibrantes</label>
    </div>

    <label>Tem alguma cor que você ama? E alguma que você não suporta?</label>
    <textarea name="colors_likes_dislikes" required></textarea>

    <p class="whats-hint">
	  Ah, se já tiver imagens de referência, me chama no <a id="wa-link" href="#" target="_blank" rel="noopener">WhatsApp</a> 📲
	</p>

    <button type="button" onclick="nextIfValid('form-stage3','box4')">Próxima Etapa</button>

  </form>
</div>

<!-- 4. Rotina no espaço + móveis -->
<div id="box4" class="container">
  <h2>Sua rotina no espaço 🏡</h2>
  <form id="form-stage4">
    <label>Quantas pessoas moram na casa? (pode colocar as idades, ajuda bastante!)</label>
    <textarea name="residents" required></textarea>

    <label>Tem pets? Se sim, quais?</label>
    <textarea name="pets"      required></textarea>

    <label>Vocês costumam receber visitas com frequência?</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="guests" value="Sim" required> Sim</label>
      <label class="inline-option"><input type="radio" name="guests" value="Não"> Não</label>
    </div>

    <label>O que rola mais no dia a dia da casa?</label>
    <div class="option-group">
      <label class="inline-option"><input type="checkbox" name="activities" value="Assistir TV"> Assistir TV</label>
      <label class="inline-option"><input type="checkbox" name="activities" value="Receber amigos"> Receber amigos</label>
      <label class="inline-option"><input type="checkbox" name="activities" value="Trabalhar em casa"> Trabalhar em casa</label>
      <label class="inline-option"><input type="checkbox" name="activities" value="Estudar"> Estudar</label>
      <label class="inline-option"><input type="checkbox" name="activities" value="Outros"> Outros</label>
      <input type="text" id="activities_other" name="activities_outros" placeholder="Quais?" style="display:none;">
    </div>

    <h3 style="text-align:center;margin-top:20px;color:#e0e0e0;">🪑 Sobre móveis que já existem</h3>
    <label>Me conta: você pretende aproveitar algum móvel que já tem no espaço atual?</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="keep_furniture" value="Sim, quero aproveitar alguns móveis"> Sim, quero aproveitar alguns móveis</label>
      <label class="inline-option"><input type="radio" name="keep_furniture" value="Não, quero tudo novo"> Não, quero tudo novo</label>
      <label class="inline-option"><input type="radio" name="keep_furniture" value="Ainda não sei, podemos avaliar juntos"> Ainda não sei, podemos avaliar juntos</label>
    </div>

    <div id="indispensable_furniture_group" style="display:none;">
      <label>Se sim, quais móveis são indispensáveis e precisam ser mantidos no projeto? ✍️</label>
      <textarea name="indispensable_furniture"></textarea>
    </div>

    <button type="button" onclick="nextIfValid('form-stage4','box5')">Próxima Etapa</button>

  </form>
</div>

<!-- 5. Investimento e prazo -->
<div id="box5" class="container">
  <h2>Dinheiro e prazo 💰</h2>
  <form id="form-stage5">
    <label>Tem ideia de quando pretende começar o projeto?</label>
    <input type="text" name="start_date" placeholder="Mês/Ano" required>

    <label>Existe alguma data limite (ex: mudança, evento, etc.)?</label>
    <input type="text" name="deadline"   placeholder="Descreva aqui" required>

    <label>Pensando no investimento, você diria que está buscando algo mais:</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="budget" value="Econômico" required> Econômico</label>
      <label class="inline-option"><input type="radio" name="budget" value="Intermediário"> Intermediário</label>
      <label class="inline-option"><input type="radio" name="budget" value="Alto padrão"> Alto padrão</label>
    </div>

    <button type="button" onclick="nextIfValid('form-stage5','box5b')">Próxima Etapa</button>

  </form>
</div>

<!-- 6. Disponibilidade para reunião -->
<div id="box5b" class="container">
  <h2>🤝 Bora alinhar juntos?</h2>
  <form id="form-stage5b">
    <label>Você teria disponibilidade para uma reunião online com um dos nossos arquitetos para alinharmos esse briefing?</label>
    <div class="option-group">
      <label class="inline-option"><input type="radio" name="meeting" value="Sim, com certeza" required> Sim, com certeza</label>
      <label class="inline-option"><input type="radio" name="meeting" value="Talvez, dependendo do horário"> Talvez, dependendo do horário</label>
      <label class="inline-option"><input type="radio" name="meeting" value="Prefiro alinhar só por mensagens"> Prefiro alinhar só por mensagens</label>
    </div>
    <button type="button" onclick="nextIfValid('form-stage5b','box6')">Próxima Etapa</button>

  </form>
</div>

<!-- 7. Observações finais -->
<div id="box6" class="container">
  <h2>Pra fechar… ✍️</h2>
  <form id="form-stage6">
    <p>Aqui é o espaço livre pra você colocar qualquer comentário ou detalhe que ache importante. Pode ser um desejo especial, uma preocupação, ou até uma ideia que surgiu agora.</p>
    <textarea name="observations"></textarea>

    <button type="button" onclick="sendEmail()">Finalizar</button>
  </form>
</div>

<!-- Tela final -->
<div id="box7" class="container">
  <h2>Formulário enviado com sucesso ✅</h2>
  <p>Nossa equipe vai analisar e logo entraremos em contato com você.</p>

  <div class="contact-info">
    <p>
      <a href="mailto:arquiteto.soares@gmail.com">arquiteto.soares@gmail.com</a>
    </p>
    <p>
      <a href="https://instagram.com/marcossoaresarquitetura" target="_blank" rel="noopener">
        @marcossoaresarquitetura
      </a>
    </p>
    <p>
      <a href="https://wa.me/5521975902315" target="_blank" rel="noopener">
        +55 21 97590-2315 (WhatsApp)
      </a>
    </p>
  </div>

  <div class="credit">
    <p>
      <small>Desenvolvido por <a href="https://nicolasneves.com.br" target="_blank" rel="noopener">Nícolas Neves</a></small>
    </p>
  </div>
</div>


<script>
  // exige que pelo menos um radio do grupo esteja marcado
  function requireOneRadio(name, msg) {
    if (!document.querySelector(`input[name="${name}"]:checked`)) {
      alert(msg); return false;
    }
    return true;
  }

  // exige que pelo menos um checkbox do grupo esteja marcado
  function requireOneCheckbox(name, msg) {
    const any = Array.from(document.querySelectorAll(`input[name="${name}"]`)).some(i => i.checked);
    if (!any) { alert(msg); return false; }
    return true;
  }

  // exige valor quando o campo está visível
  function requireIfVisible(inputOrTextarea, msg) {
    if (!inputOrTextarea) return true;
    const visible = !!(inputOrTextarea.offsetParent !== null);
    if (visible && !inputOrTextarea.value.trim()) {
      alert(msg);
      inputOrTextarea.focus();
      return false;
    }
    return true;
  }

  // Valida o form atual e só avança se estiver ok
  function nextIfValid(formId, nextBoxId) {
    const form = document.getElementById(formId);
    if (!form) return;

    // valida campos nativos 'required'
    if (!form.reportValidity()) return;

    // validações específicas por etapa
    switch (formId) {
      case 'form-stage1': {
        // já está coberto por required (nome, email, tel, endereço)
        break;
      }
      case 'form-stage2': {
        if (!requireOneRadio('project_reason', 'Selecione um motivo da transformação.')) return;

        // "Outro motivo" precisa de texto
        const reasonSel = document.querySelector('input[name="project_reason"]:checked');
        if (reasonSel && reasonSel.value === 'Outro motivo') {
          const other = document.getElementById('project_reason_other');
          if (!requireIfVisible(other, 'Informe o "Outro motivo".')) return;
        }

        // ambientes: ao menos 1
        if (!requireOneCheckbox('project_rooms', 'Selecione ao menos um ambiente.')) return;

        // "Outros" ambientes precisam de texto
        const roomsOtherChecked = Array.from(document.querySelectorAll('input[name="project_rooms"]:checked')).some(i => i.value === 'Outros');
        if (roomsOtherChecked) {
          const other = document.getElementById('project_rooms_other');
          if (!requireIfVisible(other, 'Descreva os "Outros" ambientes.')) return;
        }

        // must_have e must_not_have já estão como required
        break;
      }
      case 'form-stage3': {
        // estilos: ao menos 1 (cards + "Outro")
        if (!requireOneCheckbox('style', 'Selecione pelo menos um estilo.')) return;

        // "Outro" estilo precisa de texto
        const styleOtherChecked = Array.from(document.querySelectorAll('input[name="style"]:checked')).some(i => i.value === 'Outro');
        if (styleOtherChecked) {
          const other = document.getElementById('style_other');
          if (!requireIfVisible(other, 'Descreva o "Outro" estilo.')) return;
        }

        // colors_pref já possui required em um dos rádios
        // colors_likes_dislikes já está required
        break;
      }
      case 'form-stage4': {
        // residents & pets required já cobrem
        if (!requireOneRadio('guests', 'Informe se vocês recebem visitas.')) return;

        // atividades: ao menos 1
        if (!requireOneCheckbox('activities', 'Selecione as atividades do dia a dia.')) return;

        // "Outros" atividades precisam de texto
        const actOtherChecked = Array.from(document.querySelectorAll('input[name="activities"]:checked')).some(i => i.value === 'Outros');
        if (actOtherChecked) {
          const other = document.getElementById('activities_other');
          if (!requireIfVisible(other, 'Descreva as outras atividades.')) return;
        }

        if (!requireOneRadio('keep_furniture', 'Selecione a opção sobre os móveis.')) return;

        // se marcou "Sim...", o textarea vira obrigatório
        const keep = document.querySelector('input[name="keep_furniture"]:checked');
        if (keep && keep.value.startsWith('Sim')) {
          const ind = document.querySelector('textarea[name="indispensable_furniture"]');
          if (!requireIfVisible(ind, 'Liste os móveis indispensáveis.')) return;
        }
        break;
      }
      case 'form-stage5': {
        if (!requireOneRadio('budget', 'Escolha o perfil de investimento.')) return;
        // start_date e deadline já estão required
        break;
      }
      case 'form-stage5b': {
        if (!requireOneRadio('meeting', 'Selecione sua disponibilidade para reunião.')) return;
        break;
      }
    }

    // se passou em tudo, avança
    showNextBox(nextBoxId);
  }
</script>

<script>
  // >>> CONFIGURE AQUI seu número do WhatsApp no formato internacional, só dígitos:
  // Ex.: Brasil (21) 9 8765-4321  =>  5521987654321
  const WA_NUMBER = '5521988233083';

  function buildWhatsAppURL() {
    const name = document.querySelector('input[name="user_name"]')?.value?.trim() || '';
    // Mensagem que vai pré-preenchida no WhatsApp:
    const msg = name
      ? `Oi, me chamo ${name}. Estou preenchendo o Pré-Briefing e quero te enviar imagens de referência.`
      : `Oi! Estou preenchendo o Pré-Briefing e quero te enviar imagens de referência.`;
    const base = WA_NUMBER ? `https://wa.me/${WA_NUMBER}` : `https://wa.me/`;
    return `${base}?text=${encodeURIComponent(msg)}`;
  }

  function updateWhatsLink() {
    const a = document.getElementById('wa-link');
    if (!a) return;
    a.href = buildWhatsAppURL();
  }

  // Atualiza o link quando a página carrega e sempre que o nome mudar
  window.addEventListener('DOMContentLoaded', () => {
    updateWhatsLink();
    const nameInput = document.querySelector('input[name="user_name"]');
    if (nameInput) {
      nameInput.addEventListener('input', updateWhatsLink);
      nameInput.addEventListener('blur', updateWhatsLink);
    }
  });

  // (Opcional) Toda troca de etapa também atualiza, caso a pessoa preencha depois
  const _oldShowNextBox = window.showNextBox;
  window.showNextBox = function(nextId) {
    updateWhatsLink();
    _oldShowNextBox(nextId);
  };
</script>



<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="text/javascript">
(function() {
  emailjs.init({ publicKey: "PFs7RwLNY5lV_9BH7" });
})();
</script>

<script>
  let currentBox = 0;
  const boxes = ['box1','box2','box3','box4','box5','box5b','box6','box7','welcome-screen'];

  function showNextBox(nextBoxId) {
    document.querySelectorAll('.container').forEach(box => box.classList.remove('visible'));
    document.getElementById(nextBoxId).classList.add('visible');
    currentBox = boxes.indexOf(nextBoxId);
  }

  function navigate(direction) {
    const nextBoxId = boxes[currentBox + direction];
    if (nextBoxId) showNextBox(nextBoxId);
  }

  // helpers para mostrar "outro"/condicionais
  function toggleDisplay(inputName, expectedValue, targetId) {
    const inputs = document.querySelectorAll(`input[name="${inputName}"]`);
    const target = document.getElementById(targetId);
    inputs.forEach(inp => {
      inp.addEventListener('change', () => {
        const isSelected = inp.type === 'radio'
          ? document.querySelector(`input[name="${inputName}"]:checked`)?.value === expectedValue
          : Array.from(document.querySelectorAll(`input[name="${inputName}"]:checked`)).some(i => i.value === expectedValue);
        target.style.display = isSelected ? 'block' : 'none';
        if (!isSelected) target.value = '';
      });
    });
  }

  function toggleByCheckboxGroup(inputName, expectedValue, targetId) {
    const inputs = document.querySelectorAll(`input[name="${inputName}"]`);
    const target = document.getElementById(targetId);
    const update = () => {
      const selected = Array.from(inputs).some(i => i.checked && i.value === expectedValue);
      target.style.display = selected ? 'block' : 'none';
      if (!selected) target.value = '';
    };
    inputs.forEach(inp => inp.addEventListener('change', update));
  }

  function toggleIndispensableFurniture() {
    const radios = document.querySelectorAll('input[name="keep_furniture"]');
    const group = document.getElementById('indispensable_furniture_group');
    const update = () => {
      const val = document.querySelector('input[name="keep_furniture"]:checked')?.value || '';
      group.style.display = val.startsWith('Sim') ? 'block' : 'none';
      if (!val.startsWith('Sim')) {
        const ta = group.querySelector('textarea[name="indispensable_furniture"]');
        if (ta) ta.value = '';
      }
    };
    radios.forEach(r => r.addEventListener('change', update));
  }

  window.addEventListener('DOMContentLoaded', () => {
    toggleDisplay('project_reason', 'Outro motivo', 'project_reason_other');
    toggleByCheckboxGroup('project_rooms', 'Outros', 'project_rooms_other');
    toggleByCheckboxGroup('style', 'Outro', 'style_other');
    toggleByCheckboxGroup('activities', 'Outros', 'activities_other');
    toggleIndispensableFurniture();
  });

  function collectCheckedValues(name) {
    return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(i => i.value);
  }

  /* ================================
     NOVO: imagens dos estilos no e-mail
     ================================ */

  // Mapa estilo -> URL (iguais às imagens usadas no grid do box3)
  const STYLE_IMAGES = {
    'Moderno / Minimalista': 'https://arquitetosoares.github.io/formulario/moderno-minimalista.png',
    'Clássico / Sofisticado': 'https://arquitetosoares.github.io/formulario/classico-sofisticado.png',
    'Industrial / Urbano':   'https://arquitetosoares.github.io/formulario/industrial-urbano.png',
    'Rústico / Aconchegante':'https://arquitetosoares.github.io/formulario/rustico-aconchegante.png',
    'Escandinavo / Neutro':  'https://arquitetosoares.github.io/formulario/escandinavo-neutro.png',
    'Colorido / Criativo':   'https://arquitetosoares.github.io/formulario/colorido-criativo.png'
    // "Outro" sem imagem
  };

  // Monta HTML da galeria (tabelas 2 colunas para compatibilidade de e-mail)
  function buildStyleGalleryHTML(selectedStyles) {
    if (!selectedStyles || !selectedStyles.length) return '';

    const cards = selectedStyles.map((name) => {
      const src = STYLE_IMAGES[name];
		if (!src) {
		  // Pega o texto do campo "Outro"
		  const outroText = (document.getElementById('style_other')?.value || '').trim();
		  const outroInfo = outroText ? `Estilo informado: ${outroText}` : 'Sem imagem.';

		  return `
			<td style="padding:6px;vertical-align:top;width:50%;">
			  <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border:1px solid #1f3a54;border-radius:10px;">
				<tr><td style="padding:10px 12px;background:#0c2036;color:#eaf2ff;font-weight:700;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;">${name}</td></tr>
				<tr><td style="padding:12px;color:#b8c7e6;font-size:13px;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;">${outroInfo}</td></tr>
			  </table>
			</td>`;
		}

      return `
        <td style="padding:6px;vertical-align:top;width:50%;">
          <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border:1px solid #1f3a54;border-radius:10px;overflow:hidden;">
            <tr>
              <td style="padding:10px 12px;background:#0c2036;color:#eaf2ff;font-weight:700;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;">${name}</td>
            </tr>
            <tr>
              <td>
                <img src="${src}" alt="${name}" width="100%" style="display:block;width:100%;height:auto;">
              </td>
            </tr>
          </table>
        </td>`;
    });

    // Quebra em linhas de 2 colunas
    let rows = '';
    for (let i = 0; i < cards.length; i += 2) {
      rows += `<tr>${cards[i]}${cards[i+1] || '<td style="padding:6px;width:50%;"></td>'}</tr>`;
    }

    return `<table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">${rows}</table>`;
  }

  function sendEmail() {
    const data = {};
    // coletar os 6 formulários + 5b
    const ids = ['form-stage1','form-stage2','form-stage3','form-stage4','form-stage5','form-stage5b','form-stage6'];
    ids.forEach(fid => {
      const currentForm = document.getElementById(fid);
      if (!currentForm) return;
      const formData = new FormData(currentForm);
      for (let [key, value] of formData.entries()) {
        // vamos evitar sobrepor checkboxes: trataremos alguns campos depois
        data[key] = value;
      }
    });

    // campos de múltipla seleção
    const roomsSelected   = collectCheckedValues('project_rooms');
    const stylesSelected  = collectCheckedValues('style');
    const actsSelected    = collectCheckedValues('activities');

    data['project_rooms'] = roomsSelected.join(', ');
    data['style']         = stylesSelected.join(', ');
    data['activities']    = actsSelected.join(', ');

    // incluir "outros" quando presentes
    if (document.getElementById('project_reason_other')?.value) {
      data['project_reason'] = `${data['project_reason']} — ${document.getElementById('project_reason_other').value}`;
    }
    if (document.getElementById('project_rooms_other')?.value) {
      data['project_rooms'] = `${data['project_rooms']}${data['project_rooms'] ? ', ' : ''}${document.getElementById('project_rooms_other').value}`;
    }
    if (document.getElementById('style_other')?.value) {
      data['style'] = `${data['style']}${data['style'] ? ', ' : ''}${document.getElementById('style_other').value}`;
    }
    if (document.getElementById('activities_other')?.value) {
      data['activities'] = `${data['activities']}${data['activities'] ? ', ' : ''}${document.getElementById('activities_other').value}`;
    }

    // NOVO: galeria com imagens dos estilos selecionados (HTML para o EmailJS)
    data['style_gallery'] = buildStyleGalleryHTML(stylesSelected);

	console.log('Payload EmailJS:', data);
	
    emailjs.send('service_f0f57bc', 'template_9uqxmej', data)
      .then(() => showNextBox('box7'))
      .catch(err => {
        console.error(err);
        alert('Ocorreu um erro ao enviar. Tente novamente.');
      });
  }
</script>

</body>
</html>
